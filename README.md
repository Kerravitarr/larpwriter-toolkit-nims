# WARNING!!! ВНИМАНИЕ!!!

Я позаимствовал проект для его улучшения под свои задачи! 
Хотя я и постараюсь ни чего не сломать кардинально, я уже решил, что не буду делать перевод на английский. А уж о количестве костылей в коде я даже говорить боюсь. Если хоть кто-то заинтересуется - смотрите официальный репозиторий. Это лишь вариация на тему!!!

I created a fork of the project to improve it to fit my needs!
I will change it when I want and how I want. If at least someone is interested, see the official repository. This is just a copy!

# Набор инструментов мастера сюжетника (НИМС) - что это?

НИМС - это редактор для написания вводных для ролевых игр (РИ). Это его основная функция, и именно это он должен делать хорошо. Помимо этого, с его помощью решаются побочные задачи, но об этом позже.

НИМС реализован в виде интерактивной веб-страницы. Все, что вам нужно для работы с НИМС это веб-браузер. Проверялась работа программы в Firefox, Chrome и Internet Explorer. Для работы НИМСу не требуется соединение с интернетом, так же, как не требуется интернет для работы калькулятора.

# Для пользователей

В релизах есть последняя версия программы. Чтобы пощупать её достаточно скачать архив, распокавать его и открыть страницу nims.html.
Тут должно быть ещё одно предупреждение. НИМС - сложный комплекс со множеством настроек и вкладок. Чтобы было проще разобраться - посетите страницу группы в ВК ( http://vk.com/larp_nims) и ознакомтесь с обзором.
Обзор даст общее представление о том, как пользоваться НИМСом, там отображены не все функции имеющиеся на данный момент.

# Для тех, кто хочет изучить код
## Подготовка

0. Установите node.js
Для сборки и запуска приложения следует использовать Lerna. Установить её можно командой: 
1. `npm i -g lerna` 
После чего устанавливаются зависимости:
2. `npm i` 
3. `npm run bootstrap` 

## Запуск
Существует две версии одного приложения: однопользовательская и серверная. Вторая позволяет развернуть сервер и сделать доступным НИМС не только Мастерам, но и Игрокам.

Однопользовательская версия запускается следующим образом:
1. `npm run watch:standalone`
2. Открыть http://localhost:8080/nims.html в браузере.

Серверная версия, которая НЕ тестировалась!!!, запусается следующим образом:
1. `npm run watch:server`
Это создаст папку `packages/nims-app/dist` в которой будет готовое собранная графическая часть
2. Открыть http://localhost:3001/ и ввести логин/пароль. По умолчанию: admin/zxpoYR65
3. По умолчанию серверное приложение использует пустую базу данных, так что ей нужно скормить или существующую или встроенную.

## Сборка

Lerna осуществляет главную функцию - она следит за изменениями файлов и, как только их заметит, тут-же обновляет страницу. Это удобно для разработки, а чтобы выкатить готовую версию нужно выполнить простенькую процедуру:
1. Выполнить команду `npm run build:app`
2. В папке ./dist окажется собранное приложение.

# Описание составляющих частей

## nims-app
Интерфейс, являющийся по совместительству и однопользовательским приложением. Тут описание всех страниц и управление ими.
Тесты СУБД тут-же, они нужны чтобы не загрузить битый файл.

## nims-app-core

Общие утилиты для интерфейса. Переводчик, автосохранение в браузере и т.д. - всё тут

## nims-dbms

API обработки данных. Именно через него происходит сохранение записей, обновление полей и т.д. Эта-же часть отвечает за проверку корректности работы приложения. Пользователь не должен видеть ошибок, но если он их видит - генеруются они, по большей части, именно тут.

## nims-dbms-core

Тоже утилиты, только для БД

## nims-resources

Тут хранится перевод на другие языки. В настоящее время полноценно поддерживатется только Русский, но есть почти полностью реализованный Английский.
В этом-же проекте лежит тестовая база данных.

## nims-server

А это отдельно сервер.

# Послесловие

Оригинальная идея принадлежит Timofey Rechkalov. Я же просто доработал некоторые моменты, которых мне не хватило в оригинальной идее
Его сайт: http://trechkalov.com
Группа VK посвящённая оригинальной версии: http://vk.com/larp_nims
[YouTube канал автора](https://www.youtube.com/channel/UC8RDnWbZRcrIDVRYg-b0A1Q)
[Большой обзор версии 0.7.2](https://vk.com/video3305695_456239337)