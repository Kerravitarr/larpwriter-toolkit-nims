<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>НИМС набор инструментов мастера сюжетника</title>

<link rel="stylesheet" href="style/bootstrap.min.css" >
<link rel="stylesheet" type="text/css" href="style/style.css"
	media="screen" />
<!-- <script src="libs/dateFormat.js"></script> -->

<link rel="stylesheet" type="text/css" href="libs/vis.css"/ >
<script src="libs/vis.js"></script>

<link rel="stylesheet" type="text/css" href="libs/jquery.datetimepicker.css"/ >
<script src="libs/jquery-2.1.4.js"></script>
<script src="libs/jquery.datetimepicker.js"></script>

<script src="libs/FileSaver.js"></script>
<script src="libs/jszip-utils.js"></script>
<script src="libs/jszip.js"></script>
<script src="libs/dateFormat.js"></script>

<!-- <script src="libs/docxgen.js"></script> -->
<script src="libs/docxgen.min.js"></script>

</head>
<body onload="PageManager.onLoad()">

	<script src="js/utils.js"></script>
	<script src="js/fileUtils.js"></script>
	<script src="js/data.js"></script>
	<script src="js/DBMS.js"></script>

	<script src="js/pageManager.js"></script>
	<script src="js/migrator.js"></script>
	<script src="js/overview.js"></script>

	<script src="js/characters.js"></script>
	<script src="js/characterProfile.js"></script>
	<script src="js/characterFilter.js"></script>
	<script src="js/characterProfileConfigurer.js"></script>

	<script src="js/stories.js"></script>
	<script src="js/storyEvents.js"></script>
	<script src="js/storyCharacters.js"></script>
	<script src="js/eventPresence.js"></script>

	<script src="js/events.js"></script>

	<script src="js/briefings.js"></script>
	<script src="js/briefingExport.js"></script>
	<script src="js/briefingPreview.js"></script>

	<script src="js/timeline.js"></script>
	<script src="js/network/socialNetwork.js"></script>
	<script src="js/network/networkSubsetsSelector.js"></script>

	<script src="js/WorldCup2014.js"></script>

	<div id="navigation">
	
	</div>

	<div class="block" id="contentArea"></div>

	<div class="hidden">
		<div id="overviewDiv">
		  <div class="panel panel-default">
        <div class="panel-body">
          <table>
	          <tr>
		          <td><span>Название</span></td>
		          <td><input id="gameNameInput"></input></td>
	          </tr>
	          <tr>
		          <td><span>Дата начала доигровых событий</span></td>
		          <td><input id="preGameDatePicker"></input></td>
	          </tr>
	          <tr>
		          <td><span>Дата окончания доигровых событий</span></td>
		          <td><input id="gameDatePicker"></input></td>
	          </tr>
          </table>
        </div>
      </div>
		
		  <div style="display:flex;justify-content: space-around;">
				<div class="panel panel-default" style="flex-grow:0;flex-basis: 0;">
					<div class="panel-heading">
					  <h3 class="panel-title">Описание</h3>
					</div>
					<div class="panel-body"><textarea id="gameDescription"></textarea></div>
				</div>
				<div class="panel panel-default" style="flex-grow:0;flex-basis: 300px;">
					<div class="panel-heading">
					  <h3 class="panel-title">Статистика</h3>
					</div>
					<div class="panel-body"></div>
				</div>
		  
		  </div>
<!-- 			Описание<br><textarea id="gameDescription"></textarea> -->
		</div>


		<div id="charactersDiv">

		  <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">Управление персонажами</h3>
        </div>
        <div class="panel-body">
	        <input id="characterNameInput"></input>
	        <button id="createCharacterButton">Добавить</button>
	        <br> Переименовать из <select id="fromName"></select> в <input
	          id="toName"></input>
	        <button id="renameCharacter">OK</button>
	        <br> <select id="characterRemoveSelector"></select>
	        <button id="removeCharacterButton">Удалить</button>
        </div>
      </div>
		
			<div id="charactersNavigation"></div>
			<div id="charactersContent"></div>
		</div>


      
		<div id="characterProfile">
		  <div class="panel panel-default">
        <div class="panel-body">
					<table>
						<tr>
							<th>Персонажи</th>
						</tr>
						<tr>
							<td><select size=20 id="bioEditorSelector"></select></td>
							<td>
								<div id="profileContentDiv"></div>
							</td>
						</tr>
					</table>
        </div>
      </div>

		</div>

		<div id="characterProfileConfigurer">
		  <div class="panel panel-default">
        <div class="panel-body">
					Название<input id="profileItemNameInput" class="itemNameInput"></input> Тип<select
						id="profileItemTypeSelector">
					</select> Позиция <select id="profileItemPositionSelector">
					</select>
					<button id="createProfileItemButton">Добавить</button>
					<br> Поменять местами <select id="firstProfileField"></select> и
					<select id="secondProfileField"></select>
					<button id="swapProfileFieldsButton">OK</button>
					<br> <select id="removeProfileItemSelector"></select>
					<button id="removeProfileItemButton">Удалить</button>
					<br>
		
					<table class="table table-bordered" style="width: auto;">
					<thead>
					  <tr>
		          <th>№</th>
		          <th>Название поля</th>
		          <th>Тип</th>
		          <th>Значения</th>
		        </tr>
					</thead>
					<tbody id="profileConfigBlock"></tbody>
					</table>
        </div>
      </div>

		</div>
		

		<div id="characterFilterDiv">
			<table>
				<tr>
					<td>
			      <div class="panel panel-default">
			        <div class="panel-heading">
			          <h3 class="panel-title">Фильтр</h3>
			        </div>
			        <div class="panel-body">
								<div id="filterSettingsDiv"></div>
			        </div>
			      </div>
					</td>
					<td>
			      <div class="panel panel-default">
			        <div class="panel-body">
								<table  class="table table-striped table-bordered">
								<thead id="filterHead"></thead>
								<tbody id="filterContent"></tbody>
								</table>
			        </div>
			      </div>
					</td>
				</tr>
			</table>
		</div>
		


		<div id="storiesDiv">
			<div style="display: flex;justify-content:space-around;">
			  <div class="panel panel-default">
	        <div class="panel-heading">
	          <h3 class="panel-title">Истории</h3>
	        </div>
	        <div class="panel-body">
	          <select id="storySelector"></select>
	        </div>
	      </div>
			  <div class="panel panel-default">
	        <div class="panel-heading">
	          <h3 class="panel-title">Управление историями</h3>
	        </div>
	        <div class="panel-body">
						<input id="createStoryName"></input>
						<button id="createStoryButton">Добавить</button>
						<br> Переименовать из <select id="fromStory"></select> в <input
							id="toStory"></input>
						<button id="renameStoryButton">OK</button>
						<br> <select id="storyRemoveSelector"></select>
						<button id="removeStoryButton">Удалить</button>
	        </div>
	      </div>
	    </div>

      <div>
        <div style="display:flex;">
          <div style="width:50%;display:flex;margin-right:10px;">
	          <div class="navigation-button" id="masterStoryNavButton">Мастерская история</div>
          </div>
          <div id="storiesNavigation"></div>
        </div>
        <div style="display:flex;">
	        <div style="flex-grow:1;width:50%;margin-right:10px;" id="masterStoryDiv">
	          <div class="panel panel-default">
	            <div class="panel-body">
	               <textarea id="masterStoryArea"></textarea>
	            </div>
	          </div>
	        </div>
	        <div id="storiesContent" style="flex-grow:1;width:50%;"></div>
        </div>
      </div>

		</div>




		<div id="storyEventsDiv">
      <div class="panel panel-default">
<!--         <div class="panel-heading"> -->
<!--           <h3 class="panel-title">Управление событиями</h3> -->
<!--         </div> -->
        <div class="panel-body">
          <div style="display:flex;flex-wrap:wrap;justify-content:space-around;">
	          <div style="flex-grow:1;margin-right:10px;">
		          <h3 style="margin-top:8px;">Создание события</h3>
							Название<input id="eventNameInput"></input><br>
							Описание события<br>
							<textarea id="eventInput" class="eventText"></textarea><br>
							Позиция<select id="positionSelector"></select>
							<button id="createEventButton">Добавить</button>
	          </div>
	          <div style="flex-grow:1;">
							<h3 style="margin-top:8px;">Управление событиями</h3>
							Поменять местами <select id="firstEvent"></select> и <br> <select
								id="secondEvent"></select>
							<button id="swapEventsButton">OK</button>
							<br> <select id="cloneEventSelector"></select>
							<button id="cloneEventButton">Клонировать</button>
							<br> <select id="mergeEventSelector"></select>
							<button id="mergeEventButton">Объединить со следующим</button>
							<br> <select id="removeEventSelector"></select>
							<button id="removeEventButton">Удалить</button>
	          </div>
          </div>
					
        </div>
      </div>

      <div class="panel panel-default">
        <div class="panel-body">
					<table class="table table-bordered">
						<thead id="eventBlockHead"></thead>
						<tbody id="eventBlock"></tbody>
					</table>
        </div>
      </div>
		</div>



		<div id="storyCharactersDiv">
      <div class="panel panel-default">
        <div class="panel-body">
          <h3>Управление персонажами</h3>
					<select id="storyCharactersAddSelector"></select>
					<button id="storyCharactersAddButton">Добавить</button>
					<br> Заменить<select id="storyCharactersFromSelector"></select>
					на <select id="storyCharactersToSelector"></select>
					<button id="storyCharactersSwitchButton">ОК</button>
					<br> <select id="storyCharactersRemoveSelector"></select>
					<button id="storyCharactersRemoveButton">Удалить</button>
					<br> <br>
		
		      <div style="display:flex;flex-wrap: wrap; justify-content:space-around;">
			      <div style="flex-grow:0;margin-right:10px;max-width: 450px;">
				      <h3>Инвентарь</h3>
							<table class="table table-bordered">
								<thead id="storyCharactersTableHead"></thead>
								<tbody id="storyCharactersTable"></tbody>
							</table>
							Контроль:<span id="inventoryCheck"></span>
			      </div>
			      <div style="flex-grow:1;max-width: 450px;">
							<h3>Активность</h3>
							<table class="table table-bordered table-striped">
								<thead id="story-characterActivityTableHead"></thead>
								<tbody id="story-characterActivityTable"></tbody>
							</table>
			      </div>
		      </div>
        </div>
      </div>
		</div>

		<div id="eventPresenceDiv">
      <div class="panel panel-default">
        <div class="panel-body" style="overflow-x:auto;">
					<table  cellspacing=0 cellpadding=0 class="table table-bordered">
						<thead id="eventPresenceTableHead"></thead>
						<tbody id="eventPresenceTable"></tbody>
					</table>
        </div>
      </div>
		</div>



		<div id="eventsDiv">
		  <div class="panel panel-default">
        <div class="panel-body">
					<input type="checkbox" id="finishedStoryCheckbox">Показывать
					только незавершенные истории</input>
        </div>
      </div>
      <div style="display:flex;">
        <div style="flex-grow:0;">
						<div id="personalStoriesCharacterContainer">
				      <div class="panel panel-default">
							  <div class="panel-heading">
			            <h3 class="panel-title">История</h3>
			          </div>
				        <div class="panel-body">
				          <select id="events-storySelector" size=10></select>
				        </div>
				      </div>
				      <div class="panel panel-default">
							  <div class="panel-heading">
			            <h3 class="panel-title">Персонажи</h3>
			          </div>
				        <div class="panel-body">
									<select id="events-characterSelector" multiple size=15></select>
				        </div>
				      </div>
						</div>
					</div>
						<div class="panel panel-default" style="flex-grow:1;">
			        <div class="panel-heading">
			          <h3 class="panel-title">Адаптации</h3>
			        </div>
			        <div class="panel-body">
			           <div class="eventMainPanelRow" style="margin:0;">
				           <div class="eventMainPanelRow-left">
				             <h3>Оригинал</h3>
				           </div>
				           <div class="eventMainPanelRow-right">
				             <h3>Адаптация</h3>
				           </div>
			           </div>
			           <div id="personalStories">
			           </div>
			        </div>
			      </div>
			</div>
		</div>

		<div id="briefingsDiv">
			<div id="briefingsNavigation"></div>
			<div id="briefingsContent" ></div>
		</div>

		<div id="briefingPreviewDiv">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">Настройки</h3>
        </div>
        <div class="panel-body">
					<input type="radio" name="eventsGroupBy" value="story" 
					id="eventGroupingByStoryRadio">Группировать события по историям</input> <br> 
					<input type="radio" name="eventsGroupBy" value="time" 
					id="eventGroupingByTimeRadio">Сортировать события по хронологии</input> <br> 
        </div>
      </div>
			
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title"><select id="briefingCharacter"></select></h3>
        </div>
        <div class="panel-body">
					<div id="briefingContent"></div>
        </div>
      </div>
			
			

		</div>

		<div id="briefingExportDiv">
      <div class="panel panel-default">
        <div class="panel-body">
        
          <input type="checkbox" id="toSeparateFileCheckbox">Каждую вводную в отдельный файл</input> <br>
          <h3>Простая выгрузка</h3>
          <button id="makeBriefingsByTime">Сформировать вводные, события сгруппированны по времени (docx)</button><br>
          <button id="makeBriefingsByStory">Сформировать вводные, события сгруппированны по историям (docx)</button><br>
          <button id="makeBriefings">Сформировать вводные txt</button><br><br>
          
          <button id="makeInventoryList">Сформировать список инвентаря (docx)</button><br>
          <h3>Продвинутая выгрузка</h3>
					<input type="radio" name="eventsGroupBy2" value="story"
						id="eventGroupingByStoryRadio2">Группировать события по
					историям</input> <br> <input type="radio" name="eventsGroupBy2"
						value="time" id="eventGroupingByTimeRadio2">Сортировать
					события по хронологии</input> <br> 

							<div class="file-upload">
							     <label>
							          <input type="file" name="file" id="docxBriefings">
							          <span>Загрузить шаблон и сформировать вводные</span>
							     </label>
							</div>
        </div>
      </div>
		</div>



		<div id="timelineDiv">

			<div class="flexRoot">
				<div class="storySelectorContainer">
		      <div class="panel panel-default">
		        <div class="panel-heading">
		          <h3 class="panel-title">Истории</h3>
		        </div>
		        <div class="panel-body">
						  <select size=20 id="timelineStorySelector" multiple></select>
		        </div>
		      </div>
				</div>
				<div class="visualObjectContainer full-screen-elem" id="timelineContainer"></div>
			</div>

		</div>



		<div id="socialNetworkDiv">
      <div id="socialNetworkWarning" class="alert alert-warning"></div>
			<div class="flexRoot">
			
<!-- 			  <div style="flex-basis:150px;flex-grow:0; display:flex;flex-direction:column;flex-wrap:wrap;height:500px"> -->
				<div class="storySelectorContainer" id="commonSettingsContainer">
		      <div class="panel panel-default">
		        <div class="panel-heading">
		          <h3 class="panel-title">Общие настройки</h3>
		        </div>
		        <div class="panel-body">
							<h4>Раскраска узлов</h4> <select
								id="networkNodeGroupSelector"></select> Легенда
							<div id="colorLegend"></div>
		
							<h4>Выборка</h4> <select size=3 id="networkSubsetsSelector"></select>
							<div id="networkCharacterDiv" class="hidden">
								<h4>Персонажи</h4> <select size=20 id="networkCharacterSelector"
									multiple></select>
							</div>
		
							<div id="networkStoryDiv" class="hidden">
								<h4>Истории</h4> <select size=20 id="networkStorySelector" multiple></select>
							</div>
		        </div>
		      </div>

				</div>
				<div class="storySelectorContainer" id="privateSettingsContainer">
		      <div class="panel panel-default">
		        <div class="panel-heading">
		          <h3 class="panel-title">Частные настройки</h3>
		        </div>
		        <div class="panel-body">
							<h4>Социальная сеть</h4> <select size=4
								id="networkSelector"></select>
		
							<div id="activityBlock" class="hidden">
								<h4>Активность</h4> <select size=4 id="activitySelector" multiple></select>
							</div>
		
							<button id="drawNetworkButton">Нарисовать</button>
							<button id="hideNetworkSettingsButton">Спрятать панель</button>
		        </div>
		      </div>
				</div>
<!-- 			  </div> -->

				<div class="storySelectorContainer2 hidden"
					id="showSettingsButtonContainer">
					<button id="showNetworkSettingsButton">+</button>
				</div>

				<div class="visualObjectContainer full-screen-elem" id="socialNetworkContainer"></div>
<!-- 				<div class="visualObjectContainer" style="display:flex;flex-direction:column;"> -->
<!--           <div id="socialNetworkContainer" style="flex-base:100px;flex-grow:1;"> -->
<!-- 				</div> -->
        </div>
			</div>
		</div>


	</div>

</body>
</html>